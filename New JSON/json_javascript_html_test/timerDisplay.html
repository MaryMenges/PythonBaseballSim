<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <title>JSON Sample</title>
</head>
<body>
	<table>
		<tr><td id="home"></td></tr>
		<tr><td id="away"></td></tr>
	</table>
    <div id="placeholder"></div>
	<div id="events"></div>
    <script src="http://code.jquery.com/jquery-1.7.1.min.js"></script>
    <script>
  $.getJSON('data.json', function(data) {
        var output="<ul>";

        output+="<p>***** " + data.date + " " + data.time + " *****</p>";
        output+="<p>***** " + data.home_team + " *****</p>";

        for (var i in data.home_team_lineup) {
            output+="<li>" + data.home_team_lineup[i].name + " " + "--" + data.home_team_lineup[i].position+"</li>";
        }
        output+="<p>***** " + data.away_team + " *****</p>";
        for (var i in data.away_team_lineup) {
            output+="<li>" + data.away_team_lineup[i].name + " " + "--" + data.away_team_lineup[i].position+"</li>";
        }
        output+="<p>***************Event***************</p>";
		document.getElementById("placeholder").innerHTML=output;
		i=0;
		var away=data.away_team + ": ";
		var home=data.home_team + ": ";
		var j=0, k=0;
		document.getElementById("away").innerHTML=away;
		document.getElementById("home").innerHTML=home;
		setInterval(function(){ eventFunction(data.half_innings)}, 100);

		function scoreFunction(arr) {
            home+=data.half_innings[i].home_score+ " -- ";
			away+=data.half_innings[i].away_score+ " -- ";
			i++;
			document.getElementById("away").innerHTML=away;
			document.getElementById("home").innerHTML=home;
		}

        output+="<p>**************************************************</p>";

		function eventFunction(arr) {
			output="<ul><p>" + arr[k].events[j].description + "</p></ul>";
			document.getElementById("events").innerHTML = output;
			if (arr[k].events[j].code=="OUT-1BH" || arr[k].events[j].code=="OUT-3B") {
				j=-1;
				k++;
				scoreFunction(data.half_innings);
			}
			j++;
			/*if (k==18) {
				clearInterval(function(){ eventFunction(data.half_innings)});
				output+="<p>***** Final Score -- " + data.home_team + ": " + data.final_home_score + " -- " + data.away_team + ": " + data.final_away_score + " *****</p>";
				document.getElementById("placeholder").innerHTML = output;
			}*/
        }
        output+="</ul>";
  });
    </script>
</body>
</html>
